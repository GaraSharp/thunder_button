---
title : README.md
begin : 2024-03-03 14:49:40 

---

thunder_button.c 
================

ランダムに生成された迷路を最短距離で進む様にすると落雷の意匠が描ける、という話をみたことがあり、色々と作業して作り上げたプログラムです。


#  usage and dosage

Xaw (X athena widget) を使ったプログラムなので、コンパイル時には Xaw のinclude file が必要です。

Ubuntuの場合、`sudo apt install libxaw7-dev` とすれば準備オッケーの筈です。
Macなら、XQuartzがあれば大丈夫だと思います。

コンパイルには、-lXaw -lXt -lX11 のリンクオプションをつけます。

あとは、端末にて実行バイナリを実行するだけです。
引数に0以上1未満の数値を指定すると、その確率で不導体セルを配置します。不導体セルの設置密度確率です。
およそ、0.3〜0.4 の辺りが面白いです。
何も指定しないと、内部で 0.3 が指定されております。

プログラムを実行すると、cell field がつぎの色で着色されて表示されます。

-  白 ... 導体cell
-  赤 ... 不導体cell
-  緑 ... 落雷発生点から、電流が通った通ったcell
-  黄 ... 電流が通った通ったcell の中でも、地絡した点から遡って発生点に戻る「最短コース」

こうした形式で、落雷の意匠 (最短コース)を表示します。

cell field が表示された部分は button widget で、ここでマウスボタンを押下すると、あらためて不導体cellを配置し、落雷意匠を描き出します。

ただし、必ず「地絡」するとは限らないので、場合によっては落雷の意匠が表示されない事があります。


##  work process of thunder_button.c

以下の様にして、落雷の模様をcell field に構成しております。

1. 導体cell field に、指定の密度で「不導体」cell をrandom 設置する。
2. cell field 中央最上端から、放電を開始。
3. 注目の導体cell から、von Neumann 周囲の導体cellへ放電が進む。不導体cell ならば通電しない。
4. 放電過程では、通電した導体cell には、その"時刻"を記録しておく
5. 通電した導体cell が「地絡」するか、cell machine が定常状態になるまで、cell machine を継続稼働。
6. 地絡は、放電された導体cell が、最下端に到達した時点で判断する 

こうしてcell machine を稼働し、地絡になった場合には、地絡地点cell から、cellに記録されている時刻を遡る形で戻る事で、放電導通の最短経路を描き出しております。


いじょう


##  revision historica

- 2024-03-07 
  first appearance on github


